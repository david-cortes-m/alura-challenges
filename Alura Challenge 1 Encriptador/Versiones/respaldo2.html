<!DOCTYPE html>
<html lang="es">
    
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width"> 
        <title>Encriptador de Texto</title>
        <link rel="stylesheet" href="reset.css">
        <link rel="stylesheet" href="style.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Outfit:wght@900&display=swap" rel="stylesheet">
    </head>

    <body>
        
        <main>
        
            <section>

                <img class="logo-principal" src="imagenes/Logo.png">
                <!-- <label for="mensaje">Mensaje</label> -->
                <textarea cols="70" rows="10" id="mensaje" class="input-message" required placeholder="Ingrese el texto aqui"></textarea>
                
                <div class="validation">
                    <img class="icon" src="imagenes/icono.png">
                    <p>Solo letras minúsculas, sin acentos ni caracteres especiales</p>
                </div>
                <div class="box-buttons">
                    <button id="en-button" class="encriptar-button">Encriptar</button>
                    <button id="des-button" class="desencriptar-button">Desencriptar</button>
                </div>

            </section>

            <section class="rectangle-message">

                <img class="muneco" src="imagenes/Muñeco.png">
                <p id="title-encrypt" class="title-message">Mensaje Encriptado</p>
                <p id="title-decode" class="title-message">Mensaje Desencriptado</p>
                <p class="alert-no-message">Ningún mensaje fue encontrado</p>
                <p class="text-no-message">Ingresa el texto que desees encriptar o desencriptar.</p>
                <p class="text-message"></p>

            </section>
        
        </main>
        
        <footer>
            <p class="copyright">&copy Copyright David Cortes Curso Alura - 2022</p>
        </footer>   
    
    </body>

</html>

<script>
        
        
    function validar()
    {

    var textoi = document.querySelector(".input-message").value;
    
    // En esta parte de aquí encontre la funcion replace que cambia un valor, por otro dentro de una string en esta ocacion el espacio vacio es idicado con / /, y lo remplazamos por nada con ''
    var texto = (textoi.replace(/ /g,''));
    console.log(texto);

    for ( var i = 0; i < texto.length; i++ ) {
        vocal=texto.charAt(i);
        vocalm=texto.charAt(i).toUpperCase();
        console.log(vocalm);
        if (vocal===vocalm){
            const errormayus = document.querySelector('.text-no-message');
            errormayus.textContent = "Tu mensaje contiene mayusculas, por favor corrigelo";
            
            document.querySelector('.muneco').style.visibility="visible";
            document.querySelector('.alert-no-message').style.visibility="visible";
            document.querySelector('.text-no-message').style.visibility="visible";
            document.querySelector('#title-encrypt').style.visibility="hidden";
            document.querySelector('#title-decode').style.visibility="hidden";
            document.querySelector('.text-message').style.visibility="hidden";
            break;
        }
        else{
            if(i===texto.length-1){
                findspecialcharacters();
                break;
                }
            }
        }
    }
    
    

	
	function verificaren() {
        var caracteres = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'];
        var textoi = document.querySelector(".input-message").value;

		// var text = input.value
		var texto = (textoi.replace(/ /g,''));
		console.log(texto);
		c=0;
		
        for ( var i = 0; i < texto.length; i++ ) {
        vocal=texto.charAt(i);
		// console.log(vocal);
		
		for(var posicion = 0; posicion < caracteres.length; posicion++){
			
			if (vocal === caracteres[posicion]) {
				c=c+1;
				break; 
				}
			}
		}
		console.log(c);
		if ( c===texto.length) {

			console.log("El mensaje se puedo encriptar con exito");
            encriptar();

		} else {
			console.log("Se detecto un caracter no permitido, por favor revise el mensaje");

            const tituloerror = document.querySelector('.alert-no-message');
            tituloerror.textContent = "Detecte una mayúscula o carácter no permitido";
            const textoerror = document.querySelector('.text-no-message');
            textoerror.textContent = "Por favor revisa tu mensaje.";


            document.querySelector('.muneco').style.visibility="visible";
            document.querySelector('.alert-no-message').style.visibility="visible";
            document.querySelector('.text-no-message').style.visibility="visible";
            document.querySelector('#title-encrypt').style.visibility="hidden";
            document.querySelector('#title-decode').style.visibility="hidden";
            document.querySelector('.text-message').style.visibility="hidden";
		}

	} 
	
	function verificardes() {
        var caracteres = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'];
        var textoi = document.querySelector(".input-message").value;

		// var text = input.value
		var texto = (textoi.replace(/ /g,''));
		console.log(texto);
		c=0;
		
        for ( var i = 0; i < texto.length; i++ ) {
        vocal=texto.charAt(i);
		// console.log(vocal);
		
		for(var posicion = 0; posicion < caracteres.length; posicion++){
			
			if (vocal === caracteres[posicion]) {
				c=c+1;
				break; 
				}
			}
		}
		console.log(c);
		if ( c===texto.length) {

			console.log("El mensaje se puedo encriptar con exito");
            desencriptar();

		} else {
			console.log("Se detecto un caracter no permitido, por favor revise el mensaje");

            const tituloerror = document.querySelector('.alert-no-message');
            tituloerror.textContent = "Detecte una mayúscula o carácter no permitido";
            const textoerror = document.querySelector('.text-no-message');
            textoerror.textContent = "Por favor revisa tu mensaje.";


            document.querySelector('.muneco').style.visibility="visible";
            document.querySelector('.alert-no-message').style.visibility="visible";
            document.querySelector('.text-no-message').style.visibility="visible";
            document.querySelector('#title-encrypt').style.visibility="hidden";
            document.querySelector('#title-decode').style.visibility="hidden";
            document.querySelector('.text-message').style.visibility="hidden";
		}

	} 
    
    // [a,e,i,o,u];
    // [ai,enter,imes,ober,ufat];

    function encriptar(){
        var mensaje = [];
        var texto = document.querySelector(".input-message").value;
            for ( var i = 0; i < texto.length; i++ ) {
                vocal=texto.charAt(i);
                
                if (vocal=="a"){
                    vocal="ai";
                    mensaje.push(vocal);
                }
                else{
                    if (vocal=="e"){
                        vocal="enter";
                        mensaje.push(vocal);
                    }
                    else{
                        if (vocal=="i"){
                            vocal="imes";
                            mensaje.push(vocal);
                        }
                        else{
                            if (vocal=="o"){
                                vocal="ober";
                                mensaje.push(vocal);
                            }
                            else{
                                if (vocal=="u"){
                                    vocal="ufat";
                                    mensaje.push(vocal);
                                }
                                else{
                                    mensaje.push(vocal);
                                }
                            }
                        }
                    }
                }
            }
            
        if (texto.length!=0){
         var textoencriptado=mensaje.join("");
         console.log(textoencriptado);
         const parrafo = document.querySelector('.text-message');
         parrafo.textContent = textoencriptado;
            
         document.querySelector('.muneco').style.visibility="hidden";
         document.querySelector('.alert-no-message').style.visibility="hidden";
         document.querySelector('.text-no-message').style.visibility="hidden";
         document.querySelector('#title-encrypt').style.visibility="visible";
         document.querySelector('#title-decode').style.visibility="hidden";
         document.querySelector('.text-message').style.visibility="visible";
        
        }
        else{
         document.querySelector('.muneco').style.visibility="visible";
         document.querySelector('.alert-no-message').style.visibility="visible";
         document.querySelector('.text-no-message').style.visibility="visible";
         document.querySelector('#title-encrypt').style.visibility="hidden";
         document.querySelector('#title-decode').style.visibility="hidden";
         document.querySelector('.text-message').style.visibility="hidden";
            }
        }

    // Creamos la funcion para desencriptar

    // [a,e,i,o,u];
    // [ai,enter,imes,ober,ufat];

    function desencriptar(){
        var mensaje = [];
        var texto = document.querySelector(".input-message").value;
            for ( var i = 0; i < texto.length; i++ ) {
                vocal=texto.charAt(i);
                
                if (vocal=="a"){
                    i=i+1;
                    mensaje.push(vocal);
                }
                else{
                    if (vocal=="e"){
                        i=i+4;
                        mensaje.push(vocal);
                    }
                    else{
                        if (vocal=="i"){
                            i=i+3;
                            mensaje.push(vocal);
                        }
                        else{
                            if (vocal=="o"){
                                i=i+3;
                                mensaje.push(vocal);
                            }
                            else{
                                if (vocal=="u"){
                                    i=i+3;
                                    mensaje.push(vocal);
                                }
                                else{
                                    mensaje.push(vocal);
                                }
                            }
                        }
                    }
                }
            }
            
        if (texto.length!=0){
         var textoencriptado=mensaje.join("");
         console.log(textoencriptado);
         const parrafo = document.querySelector('.text-message');
         parrafo.textContent = textoencriptado;
            
         document.querySelector('.muneco').style.visibility="hidden";
         document.querySelector('.alert-no-message').style.visibility="hidden";
         document.querySelector('.text-no-message').style.visibility="hidden";
         document.querySelector('#title-encrypt').style.visibility="hidden";
         document.querySelector('#title-decode').style.visibility="visible";
         document.querySelector('.text-message').style.visibility="visible";
         
        
        }
        else{
         document.querySelector('.muneco').style.visibility="visible";
         document.querySelector('.alert-no-message').style.visibility="visible";
         document.querySelector('.text-no-message').style.visibility="visible";
         document.querySelector('.text-message').style.visibility="hidden";
         document.querySelector('#title-encrypt').style.visibility="hidden";
         document.querySelector('#title-decode').style.visibility="hidden";
            }
        }

        var button1 = document.querySelector(".encriptar-button");
        button1.onclick = verificaren;

        var button2 = document.querySelector(".desencriptar-button");
        button2.onclick = verificardes;

</script>